<% db = @database %>

<div class="container d-flex" style="height: calc(100vh - 60px); width: 100%">
  <% counter = 1 %>

  <% db.tables.each do |table| %>
    <div class="draggable" data-id="<%= @project[0].name + "-" + table.name %>" >
      <div class="tablecard">
        <div class="top text-center"><h3><%= table.name.capitalize %><h3></div>

        <% table.columns.each do |column| %>
          <% counter += 1 %>
          <div class="column text-center" data-comment-list="<%= counter %>" >
              <% unless column.comments.blank? %>
                <% column.comments.each do |comment| %>
            <div id="comments" class="column comment-content">
              <p><strong><%= comment.user.name %>: </strong><%= comment.content %></p>
            </div>
                <% end %>
              <% end %>
            <div class="comment-button" data-commentbutton="<%= counter %>"><i class="far fa-comment"></i></div>
            <div class="d-flex justify-content-between">
              <div class="column-comment"> <%= column.name.capitalize %> </div>
              <div class="column-comment"> <%= column.datatype %> </div>
            </div>
          </div>
        <div class="column comment hidden" data-comment="<%= counter %>" ><%= render 'comments/column_form', database: @database, column: column, comment: @comment, counter: counter, table: table %></div>
          <% counter += 1 %>
        <% end %>
        <div class="bottom text-center">
        <div class="comment-button" data-commentbutton="<%= counter %>">
          <i class="far fa-comment" aria-hidden="true"></i>
          </div>
            <div class="comment hidden" data-comment="<%= counter %>" data-comment-list="<%= counter %>">
                <% unless table.comments.blank? %>
                  <% table.comments.each do |comment| %>
              <div id="comments" class="column comment-content">
                  <p><strong><%= comment.user.name %>: </strong><%= comment.content %></p>
              </div>
                  <% end %>
                <% end %>
              <%= render 'comments/form', table: table, database: @database, comment: @comment, counter: counter %>
            </div>
        </div>
      </div>
    </div>
    <div id="column">

    </div>
  <% end %>
</div>
<% table = Table.new %>
<div class="draggable">
  <div class="tablecard" style="background-color: green; width: 200px">
    <%= render 'tables/form', table: table%>
  </div>
</div>
<div class="bgimg">
</div>
